<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TokoMakananSukoMakmur</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/jpeg" href="src/Logo-cut.jpeg" />
</head>
<body>
  <div id="maintenance" class="hidden">
    <h1>âš’ï¸ Web Sedang Dalam Status Pemeliharaan</h1>
    <p>Silakan kembali lagi nanti.</p>

    <!-- Tombol untuk Developer -->
    <button id="dev-toggle" class="dev-btn">ğŸ”‘ Dev Access</button>

    <!-- Form Developer (Popup) -->
    <div id="dev-form" class="hidden dev-modal">
      <div class="dev-card">
        <h3>Khusus Developer</h3>
        <input type="password" id="dev-code" placeholder="Masukkan kode akses">
        <button onclick="checkDevCode()">Masuk</button>
        <p id="gate-message" class="gate-msg"></p>
      </div>
    </div>
  </div>

  <!-- Semua konten utama aplikasi dibungkus di #app -->
  <div id="app">
    <div class="container">
      <h1 style="display: flex; align-items: center;">
        <img src="src/Logo.jpeg" alt="Logo" width="75" height="75" style="margin-right: 8px;">
        WarungSukoMakmur
      </h1>

      <div class="grid" id="product-list"></div>
      
      <button id="toggle-cart" class="cart-toggle">ğŸ›’ Lihat Keranjang</button>
      <div class="cart hidden" id="cart-panel">
        <h2 style="text-align: center;">ğŸ›’ Keranjang Belanja</h2>
        <ul id="cart-items"></ul>

        <div class="promo-box">
          <label for="recipient-name">Nama Penerima:</label>
            <div class="promo-input">
              <input type="text" id="recipient-name" placeholder="Masukkan nama penerima">
            </div>
        </div>

        <!-- Kode Promo -->
        <div class="promo-box">
          <label for="promo-code">Kode Promo:</label>
          <div class="promo-input">
            <input type="text" id="promo-code" placeholder="Masukkan kode promo">
            <button type="button" onclick="applyPromo()">Pakai</button>
          </div>
          <p id="promo-message" style="color:green;font-size:0.9rem;"></p>
        </div>
        <p id="recipient-warning" style="color: red; font-size: 0.9rem; margin-top: 6px;"></p>
        <p id="total-price">Total: Rp 0</p>
        <!-- Pilihan pembayaran -->
        <label for="payment">Metode Pembayaran:</label>
        <select id="payment">
          <option value="cod">Cash on Delivery</option>
          <option value="ewallet">E-Wallet (OVO, GoPay, dll)</option>
        </select>

        <button id="clear-cart" class="btn">ğŸ—‘ï¸ Bersihkan Keranjang</button>
        <button class="btn" onclick="checkout()">Checkout</button>
        <button id="view-history" class="btn">ğŸ“œ Lihat History Transaksi</button>
      </div>
    </div>

    <!-- Modal konfirmasi pesanan -->
    <div id="confirm-overlay" class="modal hidden">
      <div class="modal-card">
        <button class="modal-close" id="confirm-close" aria-label="Tutup">Ã—</button>

        <div class="confirm-header">
          <div class="confirm-icon">ğŸ›’</div>
          <h2>Ringkasan Pembelian</h2>
          <p>Pastikan data pemesanan telah sesuai, lalu lanjutkan transaksi.</p>
        </div>

        <div class="confirm-section">
          <h3>Data User</h3>
          <div class="kv"><span>Nama Penerima</span><span id="cf-recipient"></span></div>
          <div class="kv"><span>Metode Pembayaran</span><span id="cf-payment"></span></div>
        </div>

        <div class="confirm-section">
          <h3>Pembelian</h3>
          <ul id="cf-items" class="cf-list"></ul>
        </div>

        <div class="confirm-section">
          <h3>Total Pesanan</h3>
          <div class="kv"><span>Harga Produk</span><span id="cf-subtotal"></span></div>
          <div class="kv"><span>Diskon</span><span id="cf-discount">Rp 0</span></div>
          <div class="kv total"><span>Total yang harus Dibayar</span><span id="cf-total"></span></div>
        </div>

        <button id="confirm-order" class="btn">Lanjutkan Pembayaran</button>
      </div>
    </div>

    <!-- Tombol scroll ke atas -->
    <button id="scrollTopBtn" class="scroll-top hidden">â¬†</button>

    <!-- Modal history transaksi -->
    <div id="history-overlay" class="modal hidden">
      <div class="modal-card">
        <button class="modal-close" id="history-close">Ã—</button>
        <h2>History Transaksi</h2>
        <div id="history-list"></div>
        <button id="delete-history" class="btn hidden">ğŸ—‘ï¸ Hapus Semua History</button>
      </div>
    </div>
  </div>

  <audio id="bg-music" autoplay loop>
    <source src="src/music.mp3" type="audio/mpeg">
  </audio>
  <div id="delete-confirm-overlay" class="modal hidden">
  <div class="modal-card" id="delete-confirm-card">
    <h2 id="delete-confirm-title">Hapus Semua History?</h2>
    <p id="delete-confirm-text">Anda yakin ingin menghapus semua riwayat transaksi?</p>
    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;">
      <button id="delete-yes" class="btn" style="background: #ff5722;">Ya</button>
      <button id="delete-no" class="btn" style="background: #777;">Tidak</button>
    </div>
  </div>
</div>
  <!-- Script utama -->
  <script src="script.js"></script>
</body>
</html>
